{% extends 'Luna/base.html' %}
{% load static %}
{% block content %}
    <!DOCTYPE html>
    <html lang="en">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <head>
        <meta charset="UTF-8">
        <title>Transaction Window</title>

{#        JAVASCRIPT#}
        <script type="text/javascript" src="{% static 'coin/JS/coin_style.js' %}"></script>
        <script src="https://code.jquery.com/jquery-1.11.3.min.js"></script>

{#        CSS#}
        <link rel="stylesheet" href="{% static 'coin/CSS/coin_style.css' %}">
        <link rel="stylesheet" href="{% static 'CSS/emoji.css' %}">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css"
              integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ"
              crossorigin="anonymous">
{#        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">#}

    </head>
    <body>

{#    TITLE/TOP PANEL OF OVERLORD CONTROL PAGE#}
    <div class="main_body">
        <div class="top_pane2" style="height:88px; background: #656569">
            <img id="picture" src="{% static 'coin/Pictures/black_and_white_light.jpg' %}"></img>
            <div id="overlord_title">
                <h7 style="color: white;;">THE</h7>
                <h1 style="font-weight: bold; color:white;">Overlord</h1>
            </div>
        </div>

{#    SHOWS THE EMPLOYEE INFORMATION: NAME, BADGE, ALLOTMENT AND TIME EDITED#}
        <form method="POST" action="employee_load">
            <br><h4>Employee Information</h4>
            <table>
                <tr>
                    <th>Name</th>
                    <th>Badge ID</th>
                    <th>Allotment</th>
                    <th>Edited</th>
                </tr>
                <tr>
                    <td>{{ employee_info.name }}</td>
                    <td>{{ employee_info.badgeid }}</td>
                    <td><input type="number" name="allotment" value="{{ employee_info.allotment }}"
                               style="width:200px;"></td>
                    <td>{{ employee_info.edited }}</td>
                </tr>
            </table>
            <input type="hidden" name="id" value="{{ employee_info.id }}">
            <input type="submit" style="width: 200px;">
        </form>

{#    CREATES A TRANSACTION FROM THE EMPLOYEE YOU SIGNED INTO AND EXTRACTS THEIR ALLOTMENT #}
        <form method="POST" action="overlord_create_trans">
            <br><h4>Create Transaction</h4>
            <table>
                <tr>
                    <th>Reciever</th>
                    <th>Amount</th>
                    <th>Note</th>
                    <th>Anonymous</th>
                </tr>
                <tr>
                    <th><select name="recipient" required>
                        <option></option>
                        {% for key, values in user_list.items %}
                            <option value={{ key }}>{{ values }} - {{ key }} </option>
                        {% endfor %}
                    </select></th>
                    <th><input type="number" min="1" name="award"></th>

                <th>
                            <input type="text" id="note" name="note" data-emojiable-input='unicode' style="font-size:14px; background:white;"
                                   maxlength="200">
                </th>
{#                    <th><p class="lead emoji-picker-container">#}
{#                        <input type="text" id="note" name="note" data-emojiable="true"#}
{#                               onblur="this.value=removeSpaces(this.value);" style="font-size:14px;"#}
{#                               maxlength="200"></p></th>#}

                    <th><select name="anonymous" style="font-size: 16px;">
                        <option value="0">No</option>
                        <option value="1">Yes</option>
                    </select></th>
                </tr>
            </table>
            <input type="hidden" name="id" value="{{ employee_info.id }}">
            <input type="submit" style="width: 200px;">
        </form>

{#    SHOWS THE EMPLOYEE TRANSACTION HISTORY AND HAS THE ABILITY TO REMOVE BAD COMMENTS#}
        <form method="POST" action="trans_load">
            <br><h4>Employee Transaction History</h4>
            <table>
                <tr>
                    <th>Anonymous</th>
                    <th>Reciver</th>
                    <th style="text-align: right;">Amount</th>
                    <th>Bad Comment</th>
                    <th>Note</th>
                    <th>Transaction Date</th>
                </tr>
                {% for i in employee_history %}
                    <tr>
                        {% if i.anonymous == 1 %}
                            <td>Yes</td>
                        {% endif %}
                        {% if i.anonymous == 0 %}
                            <td>No</td>
                        {% endif %}
                        <td>{{ i.recipient_name }}</td>
                        <td style="text-align: right;">{{ i.award }}</td>
                        {% if i.bad_comment == 1 %}
                            <td><select name="bad_comment">
                                <option value="1">Yes</option>
                                <option value="0">No</option>
                            </select></td>
                        {% endif %}
                        {% if i.bad_comment == 0 %}
                            <td><select name="bad_comment">
                                <option value="0">No</option>
                                <option value="1">Yes</option>
                            </select></td>
                        {% endif %}
                        <td>{{ i.note }}</td>
                        <td>{{ i.created_at }}</td>
                        <input type="hidden" name="id" value="{{ i.id }}">
                    </tr>
                {% endfor %}
            </table>
            <input type="submit" style="width: 200px;">
        </form>

    </div>
    <script src="{% static 'coin/JS/config.js' %}"></script>
    <script src="{% static 'coin/JS/util.js' %}"></script>
    <script src="{% static 'coin/JS/jquery.emojiarea.js' %}"></script>
    <script src="{% static 'coin/JS/emoji-picker.js' %}"></script>
    </body>
{% endblock %}