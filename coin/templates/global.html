{% extends 'Luna/base.html' %}
{% block content %}
    <!DOCTYPE html>
    <html lang="en">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <head>
        <meta charset="UTF-8">
        <title>Global Transaction Window</title>
        {% load staticfiles %}
        <link rel="stylesheet" href="{% static 'coin/CSS/coin_style.css' %}">
        <script type="text/javascript" src="{% static 'coin/JS/clock.js' %}"></script>
    </head>
    <body>
    <div class="main_body">
        <div class="top_pane">
            <div class="btnform_box">
                <form action="agent" method="POST" style="display:inline-block;">
                    {% csrf_token %}
                    <button class="btn">Personal View</button>
                </form>
                <form class="btnform" action="transaction_view" method="POST" style="display: inline-block;">
                    {% csrf_token %}
                    <button class="btn">Send Coin</button>
                </form>
                <form style="display:inline-block;"
                      onclick="window.open('https://store.vivintsolar.com/', '_blank'); return false;">
                    <button class="btn">Store</button>
                </form>
            </div>

            <div class="balance_box">
                <div class="total_share_coin_box">
                    <p class="s_balance">Sharing Balance:</p>
                    <div style="font-size: 12px;">Expiration Date</div>
                    <div id="clock"></div>
                    {{ coin }}
                </div>
            </div>
            <div class="comment_box">
                <br>{#                add comments here                      #}
                <br>{#                add comments here                      #}
                <div style="color:purple; vertical-align: bottom;">Gifted coin will not reflect in store till next
                    Tuesday
                </div>
            </div>
        </div>
        <table>
            <tr>
                <th>Giver</th>
                <th>Receiver</th>
                <th style="text-align: right;">Amount</th>
                <th>Date</th>
                <th width="60%">Reason</th>
            </tr>

            {% for x in transaction %}
                <tr>
                    {% if x.anonymous == 1 %}
                        <td>Anonymous</td>
                    {% endif %}
                    {% if x.anonymous == 0 %}
                        <td>{{ x.benefactor_name }}</td>
                    {% endif %}
                    <td>{{ x.recipient_name }}</td>
                    <td style="text-align: right;">{{ x.award }}</td>
                    <td>{{ x.created_at }}</td>
                    {% if x.bad_comment == 1 %}
                        <td></td>
                    {% endif %}
                    {% if x.bad_comment == 0 %}
                        <td>{{ x.note }}</td>
                    {% endif %}
                </tr>
            {% endfor %}
        </table>

        <p style="font-size: 12px;">If you have any questions or comments please contact
            <a href="mailto:elizabeth.clark@vivintsolar.com?Subject=Coin%20Question%20or%20Comment">Clark</a></p>
        <div class="pagination">
            <span class="step-links">
                {% if transaction.has_previous %}
                    <a href="?page=1">&laquo; FIRST</a>
                    <a href="?page={{ transaction.previous_page_number }}">PREVIOUS</a>
                {% endif %}

                <span class="current">
                    Page {{ transaction.number }} of {{ transaction.paginator.num_pages }}
                </span>

                {% if transaction.has_next %}
                    <a href="?page={{ transaction.next_page_number }}">NEXT</a>
                    <a href="?page={{ transaction.paginator.num_pages }}">LAST &raquo;</a>
                {% endif %}
            </span>
        </div>
    </div>
    </body>
    </html>
{% endblock %}